# SonarCloud Configuration for Zaakiy Backend
# Documentation: https://docs.sonarcloud.io/advanced-setup/analysis-parameters/

# =======================
# Project Identification
# =======================
sonar.projectKey=INNOVZ_zaakiy
sonar.organization=innovz

# Basic project info
sonar.projectName=Zaakiy Backend
sonar.projectVersion=2.1.0

# =======================
# Source Code Settings
# =======================
sonar.sources=app
sonar.tests=tests

# Language
sonar.language=py
sonar.python.version=3.11,3.12

# =======================
# Coverage Settings
# =======================
# Path to coverage report (generated by pytest-cov)
sonar.python.coverage.reportPaths=coverage.xml

# Test execution reports (optional - for test metrics)
sonar.python.xunit.reportPath=test-results.xml

# =======================
# Exclusions
# =======================
# Files to exclude from analysis
sonar.exclusions=\
    **/__pycache__/**,\
    **/.venv/**,\
    **/venv/**,\
    **/migrations/**,\
    **/alembic/versions/**,\
    **/.pytest_cache/**,\
    **/htmlcov/**,\
    **/*.pyc

# Test files (don't analyze them as source code)
sonar.test.exclusions=\
    **/test_*.py,\
    **/*_test.py,\
    **/tests/**,\
    **/conftest.py

# Files to exclude from coverage calculation
sonar.coverage.exclusions=\
    **/tests/**,\
    **/__init__.py,\
    **/conftest.py,\
    **/migrations/**,\
    **/alembic/versions/**,\
    **/scripts/**

# =======================
# Duplication Settings
# =======================
# Minimum lines for duplication detection
sonar.cpd.python.minimumLines=10

# =======================
# Issue Detection
# =======================
# Enable all issue types
sonar.issue.ignore.multicriteria=e1,e2

# Ignore specific rules (example - adjust as needed)
# e1.ruleKey=python:S1192  # String literals should not be duplicated
# e1.resourceKey=**/*.py

# =======================
# Branch Analysis
# =======================
# For pull request analysis
# sonar.pullrequest.key=
# sonar.pullrequest.branch=
# sonar.pullrequest.base=main

# =======================
# Quality Gate
# =======================
# Wait for quality gate result (useful in CI/CD)
sonar.qualitygate.wait=false
sonar.qualitygate.timeout=300

# =======================
# Additional Settings
# =======================
# Source file encoding
sonar.sourceEncoding=UTF-8

# Working directory for analysis
sonar.working.directory=.scannerwork

# Verbose logging (set to true for debugging)
sonar.verbose=false

# =======================
# Notes
# =======================
# To run analysis:
# 1. Install dependencies: pip install pytest pytest-cov
# 2. Run tests with coverage: python -m pytest tests/ --cov=app --cov-report=xml
# 3. Run SonarScanner: sonar-scanner -Dsonar.login=YOUR_TOKEN
#
# For GitHub Actions integration, see: .github/workflows/sonarcloud.yml
